{"version":3,"file":"openlogin.cjs.js","mappings":"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","sources":["webpack://@toruslabs/openlogin/external commonjs2 \"@babel/runtime/helpers/typeof\"","webpack://@toruslabs/openlogin/external commonjs2 \"@babel/runtime/helpers/slicedToArray\"","webpack://@toruslabs/openlogin/external commonjs2 \"@toruslabs/http-helpers\"","webpack://@toruslabs/openlogin/external commonjs2 \"lodash.merge\"","webpack://@toruslabs/openlogin/./src/Modal.ts","webpack://@toruslabs/openlogin/./src/OpenLogin.ts","webpack://@toruslabs/openlogin/./src/MemoryStore.ts","webpack://@toruslabs/openlogin/./src/OpenLoginStore.ts","webpack://@toruslabs/openlogin/external commonjs2 \"@babel/runtime/helpers/assertThisInitialized\"","webpack://@toruslabs/openlogin/external commonjs2 \"@babel/runtime/helpers/inherits\"","webpack://@toruslabs/openlogin/external commonjs2 \"@babel/runtime/helpers/possibleConstructorReturn\"","webpack://@toruslabs/openlogin/external commonjs2 \"@babel/runtime/helpers/getPrototypeOf\"","webpack://@toruslabs/openlogin/external commonjs2 \"pump\"","webpack://@toruslabs/openlogin/./src/Provider.ts","webpack://@toruslabs/openlogin/./src/constants.ts","webpack://@toruslabs/openlogin/external commonjs2 \"loglevel\"","webpack://@toruslabs/openlogin/./src/loglevel.ts","webpack://@toruslabs/openlogin/./src/utils.ts","webpack://@toruslabs/openlogin/external commonjs2 \"@babel/runtime/helpers/asyncToGenerator\"","webpack://@toruslabs/openlogin/external commonjs2 \"@babel/runtime/helpers/classCallCheck\"","webpack://@toruslabs/openlogin/external commonjs2 \"@babel/runtime/helpers/createClass\"","webpack://@toruslabs/openlogin/external commonjs2 \"@babel/runtime/helpers/defineProperty\"","webpack://@toruslabs/openlogin/external commonjs2 \"@babel/runtime/regenerator\"","webpack://@toruslabs/openlogin/external commonjs2 \"@toruslabs/eccrypto\"","webpack://@toruslabs/openlogin/external commonjs2 \"@toruslabs/openlogin-jrpc\"","webpack://@toruslabs/openlogin/external commonjs2 \"@toruslabs/openlogin-utils\"","webpack://@toruslabs/openlogin/webpack/bootstrap","webpack://@toruslabs/openlogin/webpack/runtime/compat get default export","webpack://@toruslabs/openlogin/webpack/runtime/define property getters","webpack://@toruslabs/openlogin/webpack/runtime/hasOwnProperty shorthand","webpack://@toruslabs/openlogin/webpack/runtime/make namespace object","webpack://@toruslabs/openlogin/./src/index.ts"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/typeof\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/slicedToArray\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@toruslabs/http-helpers\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"lodash.merge\");","import { LoginConfig, ObjectMultiplex, PostMessageStream, setupMultiplex, Substream, WhiteLabelData } from \"@toruslabs/openlogin-jrpc\";\n\nimport { modalDOMElementID } from \"./constants\";\nimport log from \"./loglevel\";\nimport { documentReady, htmlToElement } from \"./utils\";\n\nexport const handleStream = (handle: Substream, eventName: string, handler: (chunk: unknown) => void): void => {\n  const handlerWrapper = (chunk: unknown) => {\n    handler(chunk);\n    handle.removeListener(eventName, handlerWrapper);\n  };\n  handle.on(eventName, handlerWrapper);\n};\n\nexport class Modal {\n  modalUrl: string;\n\n  iframeElem: HTMLIFrameElement;\n\n  initialized = false;\n\n  modalZIndex = 99999;\n\n  mux: ObjectMultiplex;\n\n  verifierStream: Substream;\n\n  constructor(modalUrl: string) {\n    this.modalUrl = modalUrl;\n  }\n\n  async init(): Promise<void> {\n    await this.initIFrame(this.modalUrl);\n    this.setupStream();\n  }\n\n  setupStream(): void {\n    if (this.iframeElem === null) throw new Error(\"iframe is null\");\n    this.mux = setupMultiplex(\n      new PostMessageStream({\n        name: \"modal_iframe_rpc\",\n        target: \"modal_rpc\",\n        targetWindow: this.iframeElem.contentWindow,\n        targetOrigin: new URL(this.modalUrl).origin,\n      })\n    );\n    this.verifierStream = this.mux.createStream(\"verifier\");\n  }\n\n  async initIFrame(src: string): Promise<void> {\n    await documentReady();\n    const documentIFrameElem = document.getElementById(modalDOMElementID) as HTMLIFrameElement;\n    if (documentIFrameElem) {\n      documentIFrameElem.remove();\n      log.info(\"already initialized, removing previous modal iframe\");\n    }\n    this.iframeElem = htmlToElement<HTMLIFrameElement>(\n      `<iframe\n        id=${modalDOMElementID}\n        class=\"torusIframe\"\n        src=\"${src}\"\n        style=\"display: none; position: fixed; top: 0; right: 0; width: 100%;\n        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex.toString()}\"\n      ></iframe>`\n    );\n    this._hideModal();\n    document.body.appendChild(this.iframeElem);\n    return new Promise<void>((resolve) => {\n      this.iframeElem.onload = () => {\n        this.initialized = true;\n        resolve();\n      };\n    });\n  }\n\n  _showModal(): void {\n    const style: Record<string, unknown> = {};\n    style.display = \"block\";\n    style.position = \"fixed\";\n    style.width = \"100%\";\n    style.height = \"100%\";\n    style.top = \"0px\";\n    style.right = \"0px\";\n    style.left = \"0px\";\n    style.bottom = \"0px\";\n    style.border = \"0\";\n    style[\"z-index\"] = this.modalZIndex;\n    this.iframeElem.setAttribute(\n      \"style\",\n      Object.entries(style)\n        .map(([k, v]) => `${k}:${v}`)\n        .join(\";\")\n    );\n  }\n\n  _hideModal(): void {\n    const style: Record<string, unknown> = {};\n    style.display = \"none\";\n    style.position = \"fixed\";\n    style.width = \"100%\";\n    style.height = \"100%\";\n    style.top = \"0px\";\n    style.right = \"0px\";\n    style.left = \"0px\";\n    style.bottom = \"0px\";\n    style.border = \"0\";\n    style[\"z-index\"] = this.modalZIndex;\n    this.iframeElem.setAttribute(\n      \"style\",\n      Object.entries(style)\n        .map(([k, v]) => `${k}:${v}`)\n        .join(\";\")\n    );\n  }\n\n  async _prompt(clientId: string, whiteLabel: WhiteLabelData, loginConfig: LoginConfig, cb: (chunk: unknown) => Promise<void>): Promise<void> {\n    this._showModal();\n    const modalHandler = (chunk) => {\n      this._hideModal();\n      cb(chunk);\n    };\n    handleStream(this.verifierStream, \"data\", modalHandler);\n    this.verifierStream.write({\n      name: \"prompt\",\n      clientId,\n      whiteLabel,\n      loginConfig,\n    });\n  }\n\n  async cleanup(): Promise<void> {\n    await documentReady();\n    const documentIFrameElem = document.getElementById(modalDOMElementID) as HTMLIFrameElement;\n    if (documentIFrameElem) {\n      documentIFrameElem.remove();\n      this.iframeElem = null;\n    }\n    this.initialized = false;\n  }\n}\n","import { decrypt, Ecies, encrypt, getPublic, sign } from \"@toruslabs/eccrypto\";\nimport { get } from \"@toruslabs/http-helpers\";\nimport { getRpcPromiseCallback, JRPCRequest, LoginConfig, OriginData, SessionInfo, WhiteLabelData } from \"@toruslabs/openlogin-jrpc\";\nimport { base64url, jsonToBase64, keccak, randomId } from \"@toruslabs/openlogin-utils\";\nimport merge from \"lodash.merge\";\n\nimport { ALLOWED_INTERACTIONS, OPENLOGIN_METHOD, OPENLOGIN_NETWORK, UX_MODE } from \"./constants\";\nimport {\n  BaseLogoutParams,\n  BaseRedirectParams,\n  CUSTOM_LOGIN_PROVIDER_TYPE,\n  LOGIN_PROVIDER_TYPE,\n  LoginParams,\n  OPENLOGIN_NETWORK_TYPE,\n  OpenLoginOptions,\n  OpenloginUserInfo,\n  RequestParams,\n  UX_MODE_TYPE,\n} from \"./interfaces\";\nimport { Modal } from \"./Modal\";\nimport OpenLoginStore from \"./OpenLoginStore\";\nimport Provider from \"./Provider\";\nimport { awaitReq, constructURL, getHashQueryParams, getPopupFeatures, preloadIframe } from \"./utils\";\n\npreloadIframe(\"https://app.openlogin.com/sdk-modal\");\n\nexport type OpenLoginState = {\n  network: OPENLOGIN_NETWORK_TYPE;\n  privKey?: string;\n  coreKitKey?: string;\n  walletKey?: string;\n  tKey?: string;\n  oAuthPrivateKey?: string;\n  support3PC?: boolean;\n  clientId: string;\n  iframeUrl: string;\n  redirectUrl: string;\n  startUrl: string;\n  popupUrl: string;\n  store: OpenLoginStore;\n  uxMode: UX_MODE_TYPE;\n  replaceUrlOnRedirect: boolean;\n  originData: OriginData;\n  whiteLabel: WhiteLabelData;\n  loginConfig: LoginConfig;\n  storageServerUrl: string;\n  sessionNamespace: string;\n  webauthnTransports: AuthenticatorTransport[];\n};\n\nclass OpenLogin {\n  provider: Provider;\n\n  state: OpenLoginState;\n\n  modal: Modal;\n\n  constructor(options: OpenLoginOptions) {\n    this.provider = new Proxy(new Provider(), {\n      deleteProperty: () => true, // work around for web3\n    });\n    if (!options._iframeUrl) {\n      if (options.network === OPENLOGIN_NETWORK.MAINNET) {\n        options._iframeUrl = \"https://app.openlogin.com\";\n      } else if (options.network === OPENLOGIN_NETWORK.CYAN) {\n        options._iframeUrl = \"https://cyan.openlogin.com\";\n      } else if (options.network === OPENLOGIN_NETWORK.TESTNET) {\n        options._iframeUrl = \"https://beta.openlogin.com\";\n      } else if (options.network === OPENLOGIN_NETWORK.SK_TESTNET) {\n        options._iframeUrl = \"https://beta-sk.openlogin.com\";\n      } else if (options.network === OPENLOGIN_NETWORK.CELESTE) {\n        options._iframeUrl = \"https://celeste.openlogin.com\";\n      } else if (options.network === OPENLOGIN_NETWORK.AQUA) {\n        options._iframeUrl = \"https://aqua.openlogin.com\";\n      } else if (options.network === OPENLOGIN_NETWORK.DEVELOPMENT) {\n        options._iframeUrl = \"http://localhost:3000\";\n      }\n    }\n    if (!options._iframeUrl) {\n      throw new Error(\"unspecified network and iframeUrl\");\n    }\n    this.modal = new Modal(`${options._iframeUrl}/sdk-modal`);\n    this.initState({\n      ...options,\n      no3PC: options.no3PC ?? false,\n      _iframeUrl: options._iframeUrl,\n      _startUrl: options._startUrl ?? `${options._iframeUrl}/start`,\n      _popupUrl: options._popupUrl ?? `${options._iframeUrl}/popup-window`,\n      redirectUrl: options.redirectUrl ?? `${window.location.protocol}//${window.location.host}${window.location.pathname}`,\n      uxMode: options.uxMode ?? UX_MODE.REDIRECT,\n      replaceUrlOnRedirect: options.replaceUrlOnRedirect ?? true,\n      originData: options.originData ?? { [window.location.origin]: \"\" },\n      whiteLabel: options.whiteLabel ?? {},\n      loginConfig: options.loginConfig ?? {},\n      _storageServerUrl: options._storageServerUrl ?? \"https://broadcast-server.tor.us\",\n      storageKey: options.storageKey === \"session\" ? \"session\" : \"local\",\n      _sessionNamespace: options._sessionNamespace ?? \"\",\n      webauthnTransports: options.webauthnTransports ?? [\"internal\"],\n    });\n  }\n\n  get privKey(): string {\n    return this.state.privKey ? this.state.privKey.padStart(64, \"0\") : \"\";\n  }\n\n  get coreKitKey(): string {\n    return this.state.coreKitKey ? this.state.coreKitKey.padStart(64, \"0\") : \"\";\n  }\n\n  initState(options: Required<OpenLoginOptions>): void {\n    this.state = {\n      uxMode: options.uxMode,\n      network: options.network,\n      store: OpenLoginStore.getInstance(options._sessionNamespace, options.storageKey),\n      iframeUrl: options._iframeUrl,\n      startUrl: options._startUrl,\n      popupUrl: options._popupUrl,\n      clientId: options.clientId,\n      redirectUrl: options.redirectUrl,\n      replaceUrlOnRedirect: options.replaceUrlOnRedirect,\n      originData: options.originData,\n      loginConfig: options.loginConfig,\n      support3PC: !options.no3PC,\n      whiteLabel: options.whiteLabel,\n      storageServerUrl: options._storageServerUrl,\n      sessionNamespace: options._sessionNamespace,\n      webauthnTransports: options.webauthnTransports,\n    };\n  }\n\n  async init(): Promise<void> {\n    if (this.state.network === OPENLOGIN_NETWORK.TESTNET) {\n      // using console log because it shouldn't be affected by loglevel config\n      // eslint-disable-next-line no-console\n      console.log(\"%c WARNING! You are on testnet. Please set network: 'mainnet' in production\", \"color: #FF0000\");\n    }\n    if (this.state.uxMode === UX_MODE.SESSIONLESS_REDIRECT) {\n      await this.updateOriginData();\n      // in this mode iframe is not used so support3pc must be false\n      this.state.support3PC = false;\n    } else {\n      // initialize iframe only when redirect or popup mode\n      await Promise.all([this.modal.init(), this.updateOriginData()]);\n      this.provider.init({ iframeElem: this.modal.iframeElem, iframeUrl: this.state.iframeUrl });\n    }\n\n    const params = getHashQueryParams(this.state.replaceUrlOnRedirect);\n    if (params.sessionId) {\n      this.state.store.set(\"sessionId\", params.sessionId);\n    }\n    if (this.state.uxMode === UX_MODE.SESSIONLESS_REDIRECT) {\n      this._syncState(params);\n    } else {\n      this._syncState(await this._getData());\n    }\n\n    if (this.state.support3PC) {\n      const res = await this._check3PCSupport();\n      this.state.support3PC = !!res.support3PC;\n    }\n  }\n\n  async updateOriginData(): Promise<void> {\n    const filteredOriginData = JSON.parse(JSON.stringify(this.state.originData));\n    Object.keys(filteredOriginData).forEach((key) => {\n      if (filteredOriginData[key] === \"\") delete filteredOriginData[key];\n    });\n    const [whitelist, whiteLabel] = await Promise.all([this.getWhitelist(), this.getWhiteLabel()]);\n    this._syncState({ originData: { ...whitelist, ...filteredOriginData }, whiteLabel: { ...whiteLabel, ...this.state.whiteLabel } });\n  }\n\n  async getWhitelist(): Promise<OriginData> {\n    try {\n      const { clientId } = this.state;\n      if (!clientId) {\n        throw new Error(\"unspecified clientId\");\n      }\n      const url = new URL(\"https://api.developer.tor.us/whitelist\");\n      url.searchParams.append(\"project_id\", this.state.clientId);\n      url.searchParams.append(\"network\", this.state.network);\n      const res = await get<{ signed_urls: OriginData }>(url.href);\n      return res.signed_urls;\n    } catch (_) {\n      // fail silently\n      return {};\n    }\n  }\n\n  async getWhiteLabel(): Promise<WhiteLabelData> {\n    try {\n      const { clientId } = this.state;\n      if (!clientId) {\n        throw new Error(\"unspecified clientId\");\n      }\n      const url = new URL(\"https://api.developer.tor.us/whitelabel\");\n      url.searchParams.append(\"project_id\", this.state.clientId);\n      const res = await get<{ whiteLabel: WhiteLabelData }>(url.href);\n      return res.whiteLabel;\n    } catch (_) {\n      // fail silently\n      return {};\n    }\n  }\n\n  async login(params?: LoginParams & Partial<BaseRedirectParams>): Promise<{ privKey: string }> {\n    if (params?.loginProvider) {\n      return this._selectedLogin(params);\n    }\n    if (this.state.uxMode === UX_MODE.SESSIONLESS_REDIRECT) {\n      throw new Error(`Please pass loginProvider in params while using ${UX_MODE.SESSIONLESS_REDIRECT} mode`);\n    }\n    return this._modal(params);\n  }\n\n  async _selectedLogin(params: LoginParams & Partial<BaseRedirectParams>): Promise<{ privKey: string }> {\n    const defaultParams: BaseRedirectParams = {\n      redirectUrl: this.state.redirectUrl,\n    };\n\n    const loginParams: LoginParams = {\n      loginProvider: params.loginProvider,\n      ...defaultParams,\n      ...params,\n    };\n\n    const res = await this.request<{ privKey: string; store?: Record<string, string> }>({\n      method: OPENLOGIN_METHOD.LOGIN,\n      allowedInteractions: [UX_MODE.REDIRECT, UX_MODE.POPUP],\n      startUrl: this.state.startUrl,\n      popupUrl: this.state.popupUrl,\n      params: [loginParams],\n    });\n    this.state.privKey = res.privKey;\n    if (res.store) {\n      this._syncState(res);\n    } else if (this.state.privKey && this.state.support3PC) {\n      this._syncState(await this._getData());\n    }\n    return { privKey: this.privKey };\n  }\n\n  async logout(logoutParams: Partial<BaseLogoutParams> & Partial<BaseRedirectParams> = {}): Promise<void> {\n    const params: Record<string, unknown> = {};\n    // defaults\n    params.redirectUrl = this.state.redirectUrl;\n    params._clientId = this.state.clientId;\n    params.sessionId = this.state.store.get(\"sessionId\");\n\n    if (logoutParams.clientId) {\n      params._clientId = logoutParams.clientId;\n    }\n    if (logoutParams.redirectUrl !== undefined) {\n      params.redirectUrl = logoutParams.redirectUrl;\n    }\n\n    const allowedInteractions = this.state.uxMode === UX_MODE.SESSIONLESS_REDIRECT ? [ALLOWED_INTERACTIONS.REDIRECT] : [ALLOWED_INTERACTIONS.JRPC];\n    const res = await this.request<void>({\n      method: OPENLOGIN_METHOD.LOGOUT,\n      params: [params],\n      startUrl: this.state.startUrl,\n      popupUrl: this.state.popupUrl,\n      allowedInteractions,\n    });\n\n    this._syncState({\n      privKey: \"\",\n      coreKitKey: \"\",\n      walletKey: \"\",\n      oAuthPrivateKey: \"\",\n      tKey: \"\",\n      store: {\n        name: \"\",\n        profileImage: \"\",\n        dappShare: \"\",\n        idToken: \"\",\n        oAuthIdToken: \"\",\n        oAuthAccessToken: \"\",\n        sessionId: \"\",\n        sessionNamespace: \"\",\n        appState: \"\",\n      },\n    });\n\n    return res;\n  }\n\n  async request<T>(args: RequestParams): Promise<T> {\n    const pid = randomId();\n    let { params } = args;\n\n    // Note: _origin is added later in postMessageStream for jrpc requests\n    // do not add it here since its used for checking postMessage constraints\n    const session: Partial<SessionInfo> = {};\n    if (params.length !== 1) throw new Error(\"request params array should have only one element\");\n    const { startUrl, popupUrl, method, allowedInteractions } = args;\n    if (allowedInteractions.length === 0) throw new Error(\"no allowed interactions\");\n\n    if (this.state.clientId) {\n      session._clientId = this.state.clientId;\n    }\n    if (this.state.sessionNamespace) {\n      session._sessionNamespace = this.state.sessionNamespace;\n    }\n\n    if (this.privKey) {\n      const userData = {\n        clientId: session._clientId,\n        timestamp: Date.now().toString(),\n      };\n      const sig = await sign(\n        Buffer.from(this.privKey, \"hex\"),\n        Buffer.from(keccak(\"keccak256\").update(JSON.stringify(userData)).digest(\"hex\"), \"hex\")\n      );\n      session._user = getPublic(Buffer.from(this.privKey, \"hex\")).toString(\"hex\");\n      session._userSig = base64url.encode(sig);\n      session._userData = userData;\n    }\n\n    session._originData = this.state.originData;\n    session._whiteLabelData = this.state.whiteLabel;\n    session._loginConfig = this.state.loginConfig;\n    session._sessionId = this.state.store.get(\"sessionId\");\n    session._webauthnTransports = this.state.webauthnTransports;\n\n    if (!session._sessionId) {\n      const sessionId = randomId();\n      session._sessionId = sessionId as string;\n      this.state.store.set(\"sessionId\", sessionId);\n    }\n\n    // add in session data (allow overrides)\n    params = [{ ...session, ...params[0] }];\n\n    // use JRPC where possible\n\n    if (allowedInteractions.includes(ALLOWED_INTERACTIONS.JRPC)) {\n      return this._jrpcRequest<Record<string, unknown>[], T>({ method, params });\n    }\n\n    // set origin\n    params[0]._origin = new URL((params[0].redirectUrl as string) ?? this.state.redirectUrl).origin;\n\n    // preset params\n    if (this.state.support3PC) {\n      // set params first if 3PC supported\n      await this._setPIDData(pid, params);\n      // eslint-disable-next-line require-atomic-updates\n      params = [{}];\n    }\n\n    if (!startUrl || !popupUrl) {\n      throw new Error(\"no url for redirect / popup flow\");\n    }\n\n    // method and pid are always in URL hash params\n    // convert params from JSON to base64\n\n    if (this.state.uxMode === UX_MODE.REDIRECT || this.state.uxMode === UX_MODE.SESSIONLESS_REDIRECT) {\n      // if redirects preferred, check for redirect flows first, then check for popup flow\n\n      if (allowedInteractions.includes(ALLOWED_INTERACTIONS.REDIRECT)) {\n        // give time for synchronous methods to complete before redirect\n        setTimeout(() => {\n          window.location.href = constructURL({\n            baseURL: startUrl,\n            hash: { b64Params: jsonToBase64(params[0]), _pid: pid, _method: method },\n          });\n        }, 50);\n        return {} as T;\n      }\n\n      if (allowedInteractions.includes(ALLOWED_INTERACTIONS.POPUP)) {\n        const u = new URL(\n          constructURL({\n            baseURL: popupUrl,\n            hash: { b64Params: jsonToBase64(params[0]), _pid: pid, _method: method },\n          })\n        );\n        const windowRef = window.open(u.toString(), \"_blank\", getPopupFeatures());\n        return awaitReq<T>(pid, windowRef);\n      }\n    } else {\n      // if popups preferred, check for popup flows first, then check for redirect flow\n\n      if (allowedInteractions.includes(ALLOWED_INTERACTIONS.POPUP)) {\n        const u = new URL(\n          constructURL({\n            baseURL: popupUrl,\n            hash: { b64Params: jsonToBase64(params[0]), _pid: pid, _method: method },\n          })\n        );\n        const windowRef = window.open(u.toString(), \"_blank\", getPopupFeatures());\n        return awaitReq<T>(pid, windowRef);\n      }\n\n      if (allowedInteractions.includes(ALLOWED_INTERACTIONS.REDIRECT)) {\n        // give time for synchronous methods to complete before redirect\n        setTimeout(() => {\n          window.location.href = constructURL({\n            baseURL: startUrl,\n            hash: { b64Params: jsonToBase64(params[0]), _pid: pid, _method: method },\n          });\n        }, 50);\n        return null;\n      }\n    }\n\n    throw new Error(\"no matching allowed interactions\");\n  }\n\n  async _jrpcRequest<T, U>(args: JRPCRequest<T>): Promise<U> {\n    // await this.initialized;\n    if (!args || typeof args !== \"object\" || Array.isArray(args)) {\n      throw new Error(\"invalid request args\");\n    }\n\n    const { method, params } = args;\n\n    if (typeof method !== \"string\" || method.length === 0) {\n      throw new Error(\"invalid request method\");\n    }\n\n    if (params === undefined || !Array.isArray(params)) {\n      throw new Error(\"invalid request params\");\n    }\n\n    if (params.length === 0) {\n      params.push({});\n    }\n\n    return new Promise<U>((resolve, reject) => {\n      this.provider._rpcRequest({ method, params }, getRpcPromiseCallback(resolve, reject));\n    });\n  }\n\n  async _check3PCSupport(): Promise<Record<string, boolean>> {\n    return this._jrpcRequest<Record<string, unknown>[], Record<string, boolean>>({\n      method: OPENLOGIN_METHOD.CHECK_3PC_SUPPORT,\n      params: [{ _originData: this.state.originData }],\n    });\n  }\n\n  async _setPIDData(pid: string, data: Record<string, unknown>[]): Promise<void> {\n    await this.request({\n      allowedInteractions: [ALLOWED_INTERACTIONS.JRPC],\n      method: OPENLOGIN_METHOD.SET_PID_DATA,\n      params: [\n        {\n          pid,\n          data: data[0],\n        },\n      ],\n    });\n  }\n\n  async _getData(): Promise<Record<string, unknown>> {\n    if (this.state.uxMode === UX_MODE.SESSIONLESS_REDIRECT) return {};\n    return this.request<Record<string, unknown>>({\n      allowedInteractions: [ALLOWED_INTERACTIONS.JRPC],\n      method: OPENLOGIN_METHOD.GET_DATA,\n      params: [{}],\n    });\n  }\n\n  _syncState(newState: Record<string, unknown>): void {\n    if (newState.store) {\n      if (typeof newState.store !== \"object\") {\n        throw new Error(\"expected store to be an object\");\n      }\n      Object.keys(newState.store).forEach((key) => {\n        this.state.store.set(key, newState.store[key]);\n      });\n    }\n    const { store } = this.state;\n    this.state = { ...this.state, ...newState, store };\n  }\n\n  async _modal(params?: LoginParams & Partial<BaseRedirectParams>): Promise<{\n    privKey: string;\n  }> {\n    return new Promise<{ privKey: string }>((resolve, reject) => {\n      this.modal._prompt(this.state.clientId, this.state.whiteLabel, this.state.loginConfig, async (chunk: { cancel?: boolean }): Promise<void> => {\n        if (chunk.cancel) {\n          reject(new Error(\"user canceled login\"));\n        } else {\n          try {\n            const selectedLoginResponse = await this._selectedLogin(merge(params, chunk));\n            resolve(selectedLoginResponse);\n          } catch (error) {\n            reject(error);\n          }\n        }\n      });\n    });\n  }\n\n  async _cleanup(): Promise<void> {\n    await this.modal.cleanup();\n    this.provider.cleanup();\n  }\n\n  async encrypt(message: Buffer, privateKey?: string): Promise<Ecies> {\n    let privKey = privateKey;\n    if (!privKey) {\n      privKey = this.privKey;\n    }\n    // validations\n    if (!/^[0-9a-fA-f]{64}$/.exec(privKey)) {\n      if (privKey === \"\" || privKey === undefined) {\n        throw new Error(\"private key cannot be empty\");\n      } else {\n        throw new Error(\"invalid private key in encrypt\");\n      }\n    }\n    return encrypt(getPublic(Buffer.from(privKey, \"hex\")), message);\n  }\n\n  async decrypt(ciphertext: Ecies, privateKey?: string): Promise<Buffer> {\n    let privKey = privateKey;\n    if (!privKey) {\n      privKey = this.privKey;\n    }\n    // validations\n    if (!/^[0-9a-fA-f]{64}$/.exec(privKey)) {\n      if (privKey === \"\" || privKey === undefined) {\n        throw new Error(\"private key cannot be empty\");\n      } else {\n        throw new Error(\"invalid private key in decrypt\");\n      }\n    }\n    return decrypt(Buffer.from(privKey, \"hex\"), ciphertext);\n  }\n\n  async getUserInfo(): Promise<OpenloginUserInfo> {\n    if (this.privKey) {\n      const storeData = this.state.store.getStore();\n      const userInfo: OpenloginUserInfo = {\n        email: (storeData.email as string) || \"\",\n        name: (storeData.name as string) || \"\",\n        profileImage: (storeData.profileImage as string) || \"\",\n        aggregateVerifier: (storeData.aggregateVerifier as string) || \"\",\n        verifier: (storeData.verifier as string) || \"\",\n        verifierId: (storeData.verifierId as string) || \"\",\n        typeOfLogin: (storeData.typeOfLogin as LOGIN_PROVIDER_TYPE | CUSTOM_LOGIN_PROVIDER_TYPE) || \"\",\n        dappShare: (storeData.dappShare as string) || \"\",\n        idToken: (storeData.idToken as string) || \"\",\n        oAuthIdToken: (storeData.oAuthIdToken as string) || \"\",\n        oAuthAccessToken: (storeData.oAuthAccessToken as string) || \"\",\n      };\n\n      return userInfo;\n    }\n    throw new Error(\"user should be logged in to fetch userInfo\");\n  }\n\n  async getEncodedLoginUrl(loginParams: LoginParams & Partial<BaseRedirectParams>): Promise<string> {\n    const { redirectUrl } = loginParams;\n    const { clientId } = this.state;\n    if (!this.state.originData[origin]) {\n      await this.updateOriginData();\n    }\n    const dataObject = {\n      _clientId: clientId,\n      _origin: new URL(redirectUrl).origin,\n      _originData: this.state.originData,\n      redirectUrl,\n      ...loginParams,\n    };\n\n    const b64Params = jsonToBase64(dataObject);\n    const hashParams = {\n      b64Params,\n      _method: \"openlogin_login\",\n    };\n\n    return constructURL({ baseURL: `${this.state.iframeUrl}/start`, hash: hashParams });\n  }\n}\n\nexport default OpenLogin;\n","import { IStore } from \"./IStore\";\n\nexport class MemoryStore implements IStore {\n  store: Record<string, string> = {};\n\n  getItem(key: string): string {\n    return this.store[key] || null;\n  }\n\n  setItem(key: string, value: string): void {\n    this.store[key] = value;\n  }\n}\n","import { storeKey } from \"./constants\";\nimport { IStore } from \"./IStore\";\nimport { MemoryStore } from \"./MemoryStore\";\nimport { localStorageAvailable, sessionStorageAvailable } from \"./utils\";\n\nexport default class OpenLoginStore {\n  // eslint-disable-next-line no-use-before-define\n  private static instance: OpenLoginStore;\n\n  private _storeKey: string = storeKey;\n\n  public storage: IStore;\n\n  private constructor(storage: IStore, _storeKey?: string) {\n    this.storage = storage;\n    this._storeKey = _storeKey || storeKey;\n    try {\n      if (!storage.getItem(_storeKey || storeKey)) {\n        this.resetStore();\n      }\n    } catch (error) {\n      // Storage is not available\n    }\n  }\n\n  static getInstance(storeNamespace: string, storageKey: \"session\" | \"local\" = \"local\"): OpenLoginStore {\n    if (!this.instance) {\n      let storage: Storage | MemoryStore = new MemoryStore();\n      if (storageKey === \"local\" && localStorageAvailable) {\n        storage = localStorage;\n      }\n      if (storageKey === \"session\" && sessionStorageAvailable) {\n        storage = sessionStorage;\n      }\n      const finalStoreKey = storeNamespace ? `${storeKey}_${storeNamespace}` : storeKey;\n      this.instance = new this(storage, finalStoreKey);\n    }\n    return this.instance;\n  }\n\n  toJSON(): string {\n    return this.storage.getItem(this._storeKey);\n  }\n\n  resetStore(): Record<string, unknown> {\n    const currStore = this.getStore();\n    this.storage.setItem(this._storeKey, JSON.stringify({}));\n    return currStore;\n  }\n\n  getStore(): Record<string, unknown> {\n    return JSON.parse(this.storage.getItem(this._storeKey));\n  }\n\n  get<T>(key: string): T {\n    const store = JSON.parse(this.storage.getItem(this._storeKey));\n    return store[key];\n  }\n\n  set<T>(key: string, value: T): void {\n    const store = JSON.parse(this.storage.getItem(this._storeKey));\n    store[key] = value;\n    this.storage.setItem(this._storeKey, JSON.stringify(store));\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/assertThisInitialized\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/inherits\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/possibleConstructorReturn\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/getPrototypeOf\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"pump\");","import {\n  createIdRemapMiddleware,\n  createStreamMiddleware,\n  JRPCEngine,\n  JRPCRequest,\n  ObjectMultiplex,\n  PostMessageStream,\n  SafeEventEmitter,\n  setupMultiplex,\n  Stream,\n} from \"@toruslabs/openlogin-jrpc\";\nimport { randomId } from \"@toruslabs/openlogin-utils\";\nimport pump from \"pump\";\n\nimport log from \"./loglevel\";\n\nexport default class Provider extends SafeEventEmitter {\n  iframeElem: HTMLIFrameElement | null = null;\n\n  rpcStream: PostMessageStream;\n\n  iframeUrl: string;\n\n  rpcEngine: JRPCEngine;\n\n  initialized: boolean;\n\n  mux: ObjectMultiplex;\n\n  init({ iframeElem, iframeUrl }: { iframeElem: HTMLIFrameElement; iframeUrl: string }): void {\n    this.iframeElem = iframeElem;\n    this.iframeUrl = iframeUrl;\n    this.setupStream();\n    this.initialized = true;\n  }\n\n  setupStream(): void {\n    if (this.iframeElem === null) throw new Error(\"iframe is null\");\n    this.rpcStream = new PostMessageStream({\n      name: \"embed_rpc\",\n      target: \"iframe_rpc\",\n      targetWindow: this.iframeElem.contentWindow,\n      targetOrigin: new URL(this.iframeUrl).origin,\n    });\n\n    this.mux = setupMultiplex(this.rpcStream);\n\n    const JRPCConnection = createStreamMiddleware();\n    pump(\n      JRPCConnection.stream as unknown as Stream,\n      this.mux.createStream(\"jrpc\") as unknown as Stream,\n      JRPCConnection.stream as unknown as Stream,\n      (error) => {\n        log.error(`JRPC connection broken`, error);\n      }\n    );\n\n    const rpcEngine = new JRPCEngine();\n    rpcEngine.push(createIdRemapMiddleware());\n    rpcEngine.push(JRPCConnection.middleware);\n    this.rpcEngine = rpcEngine;\n  }\n\n  cleanup(): void {\n    this.iframeElem = null;\n    this.initialized = false;\n  }\n\n  _rpcRequest(payload: JRPCRequest<unknown>, callback: (...args: unknown[]) => void): void {\n    if (!payload.jsonrpc) {\n      payload.jsonrpc = \"2.0\";\n    }\n    if (!payload.id) {\n      payload.id = randomId();\n    }\n    this.rpcEngine.handle(payload, callback);\n  }\n}\n","export const modalDOMElementID = \"openlogin-modal\";\n\nexport const storeKey = \"openlogin_store\";\n\nexport const UX_MODE = {\n  POPUP: \"popup\",\n  REDIRECT: \"redirect\",\n  SESSIONLESS_REDIRECT: \"sessionless_redirect\",\n} as const;\n\nexport const OPENLOGIN_METHOD = {\n  LOGIN: \"openlogin_login\",\n  LOGOUT: \"openlogin_logout\",\n  CHECK_3PC_SUPPORT: \"openlogin_check_3PC_support\",\n  SET_PID_DATA: \"openlogin_set_pid_data\",\n  GET_DATA: \"openlogin_get_data\",\n} as const;\n\nexport const ALLOWED_INTERACTIONS = {\n  POPUP: \"popup\",\n  REDIRECT: \"redirect\",\n  JRPC: \"jrpc\",\n} as const;\n\nexport const OPENLOGIN_NETWORK = {\n  MAINNET: \"mainnet\",\n  TESTNET: \"testnet\",\n  CYAN: \"cyan\",\n  DEVELOPMENT: \"development\",\n  SK_TESTNET: \"sk_testnet\",\n  CELESTE: \"celeste\",\n  AQUA: \"aqua\",\n} as const;\n\nexport const SUPPORTED_KEY_CURVES = {\n  SECP256K1: \"secp256k1\",\n  ED25519: \"ed25519\",\n} as const;\n\nexport const LOGIN_PROVIDER = {\n  GOOGLE: \"google\",\n  FACEBOOK: \"facebook\",\n  REDDIT: \"reddit\",\n  DISCORD: \"discord\",\n  TWITCH: \"twitch\",\n  APPLE: \"apple\",\n  LINE: \"line\",\n  GITHUB: \"github\",\n  KAKAO: \"kakao\",\n  LINKEDIN: \"linkedin\",\n  TWITTER: \"twitter\",\n  WEIBO: \"weibo\",\n  WECHAT: \"wechat\",\n  EMAIL_PASSWORDLESS: \"email_passwordless\",\n  SMS_PASSWORDLESS: \"sms_passwordless\",\n  WEBAUTHN: \"webauthn\",\n  JWT: \"jwt\",\n} as const;\n\nexport const MFA_LEVELS = {\n  DEFAULT: \"default\",\n  OPTIONAL: \"optional\",\n  MANDATORY: \"mandatory\",\n  NONE: \"none\",\n} as const;\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"loglevel\");","import loglevel from \"loglevel\";\n\nloglevel.setLevel(\"error\");\n\nexport default loglevel.getLogger(\"openlogin\");\n","import { getPublic, sign } from \"@toruslabs/eccrypto\";\nimport { base64url, keccak, safeatob } from \"@toruslabs/openlogin-utils\";\n\nimport { PopupResponse } from \"./interfaces\";\nimport log from \"./loglevel\";\n\nexport async function documentReady(): Promise<void> {\n  return new Promise<void>((resolve) => {\n    if (document.readyState !== \"loading\") {\n      resolve();\n    } else {\n      document.addEventListener(\"DOMContentLoaded\", () => {\n        resolve();\n      });\n    }\n  });\n}\n\nexport const htmlToElement = <T extends Element>(html: string): T => {\n  const template = window.document.createElement(\"template\");\n  const trimmedHtml = html.trim(); // Never return a text node of whitespace as the result\n  template.innerHTML = trimmedHtml;\n  return template.content.firstChild as T;\n};\n\nexport async function whitelistUrl(clientId: string, appKey: string, origin: string): Promise<string> {\n  const appKeyBuf = Buffer.from(appKey.padStart(64, \"0\"), \"hex\");\n  if (base64url.encode(getPublic(appKeyBuf)) !== clientId) throw new Error(\"appKey mismatch\");\n  const sig = await sign(appKeyBuf, Buffer.from(keccak(\"keccak256\").update(origin).digest(\"hex\"), \"hex\"));\n  return base64url.encode(sig);\n}\n\nexport function getHashQueryParams(replaceUrl = false): Record<string, string> {\n  const result = {};\n\n  const url = new URL(window.location.href);\n  url.searchParams.forEach((value, key) => {\n    if (key !== \"result\") {\n      result[key] = value;\n    }\n  });\n  const queryResult = url.searchParams.get(\"result\");\n  if (queryResult) {\n    try {\n      const queryParams = JSON.parse(safeatob(queryResult));\n      Object.keys(queryParams).forEach((key) => {\n        result[key] = queryParams[key];\n      });\n    } catch (error) {\n      log.error(error);\n    }\n  }\n\n  const hash = url.hash.substring(1);\n  const hashUrl = new URL(`${window.location.origin}/?${hash}`);\n  hashUrl.searchParams.forEach((value, key) => {\n    if (key !== \"result\") {\n      result[key] = value;\n    }\n  });\n  const hashResult = hashUrl.searchParams.get(\"result\");\n\n  if (hashResult) {\n    try {\n      const hashParams = JSON.parse(safeatob(hashResult));\n      Object.keys(hashParams).forEach((key) => {\n        result[key] = hashParams[key];\n      });\n    } catch (error) {\n      log.error(error);\n    }\n  }\n\n  if (replaceUrl) {\n    const cleanUrl = window.location.origin + window.location.pathname;\n    window.history.replaceState(null, \"\", cleanUrl);\n  }\n\n  return result;\n}\n\nexport function awaitReq<T>(id: string, windowRef: Window): Promise<T> {\n  return new Promise((resolve, reject) => {\n    if (!windowRef) {\n      reject(new Error(\"Unable to open window\"));\n      return;\n    }\n    let closedByHandler = false;\n    const closedMonitor = setInterval(() => {\n      if (!closedByHandler && windowRef.closed) {\n        clearInterval(closedMonitor);\n        reject(new Error(\"user closed popup\"));\n      }\n    }, 500);\n    const handler = (ev: MessageEvent<PopupResponse<T & { error?: string }>>) => {\n      const { pid } = ev.data;\n      if (id !== pid) return;\n      window.removeEventListener(\"message\", handler);\n      closedByHandler = true;\n      clearInterval(closedMonitor);\n      windowRef.close();\n      if (ev.data.data && ev.data.data.error) {\n        reject(new Error(ev.data.data.error));\n      } else {\n        resolve(ev.data.data);\n      }\n    };\n\n    window.addEventListener(\"message\", handler);\n  });\n}\n\nexport function constructURL(params: { baseURL: string; query?: Record<string, unknown>; hash?: Record<string, unknown> }): string {\n  const { baseURL, query, hash } = params;\n\n  const url = new URL(baseURL);\n  if (query) {\n    Object.keys(query).forEach((key) => {\n      url.searchParams.append(key, query[key] as string);\n    });\n  }\n  if (hash) {\n    const h = new URL(constructURL({ baseURL, query: hash })).searchParams.toString();\n    url.hash = h;\n  }\n  return url.toString();\n}\n\nexport function storageAvailable(type: string): boolean {\n  let storageExists = false;\n  let storageLength = 0;\n  let storage: Storage;\n  try {\n    storage = window[type];\n    storageExists = true;\n    storageLength = storage.length;\n    const x = \"__storage_test__\";\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (error) {\n    return (\n      error &&\n      // everything except Firefox\n      (error.code === 22 ||\n        // Firefox\n        error.code === 1014 ||\n        // test name field too, because code might not be present\n        // everything except Firefox\n        error.name === \"QuotaExceededErro r\" ||\n        // Firefox\n        error.name === \"NS_ERROR_DOM_QUOTA_REACHED\") &&\n      // acknowledge QuotaExceededError only if there's something already stored\n      storageExists &&\n      storageLength !== 0\n    );\n  }\n}\n\nexport const sessionStorageAvailable = storageAvailable(\"sessionStorage\");\nexport const localStorageAvailable = storageAvailable(\"localStorage\");\n\nexport function preloadIframe(url: string): void {\n  try {\n    if (typeof document === \"undefined\") return;\n    const openloginIframeHtml = document.createElement(\"link\");\n    openloginIframeHtml.href = url;\n    openloginIframeHtml.crossOrigin = \"anonymous\";\n    openloginIframeHtml.type = \"text/html\";\n    openloginIframeHtml.rel = \"prefetch\";\n    if (openloginIframeHtml.relList && openloginIframeHtml.relList.supports) {\n      if (openloginIframeHtml.relList.supports(\"prefetch\")) {\n        document.head.appendChild(openloginIframeHtml);\n      }\n    }\n  } catch (error) {\n    log.error(error);\n  }\n}\n\nexport function getPopupFeatures(): string {\n  // Fixes dual-screen position                             Most browsers      Firefox\n  const dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : window.screenX;\n  const dualScreenTop = window.screenTop !== undefined ? window.screenTop : window.screenY;\n\n  const w = 1200;\n  const h = 700;\n\n  const width = window.innerWidth\n    ? window.innerWidth\n    : document.documentElement.clientWidth\n    ? document.documentElement.clientWidth\n    : window.screen.width;\n\n  const height = window.innerHeight\n    ? window.innerHeight\n    : document.documentElement.clientHeight\n    ? document.documentElement.clientHeight\n    : window.screen.height;\n\n  const systemZoom = 1; // No reliable estimate\n\n  const left = Math.abs((width - w) / 2 / systemZoom + dualScreenLeft);\n  const top = Math.abs((height - h) / 2 / systemZoom + dualScreenTop);\n  const features = `titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${h / systemZoom},width=${w / systemZoom},top=${top},left=${left}`;\n  return features;\n}\n","module.exports = require(\"@babel/runtime/helpers/asyncToGenerator\");","module.exports = require(\"@babel/runtime/helpers/classCallCheck\");","module.exports = require(\"@babel/runtime/helpers/createClass\");","module.exports = require(\"@babel/runtime/helpers/defineProperty\");","module.exports = require(\"@babel/runtime/regenerator\");","module.exports = require(\"@toruslabs/eccrypto\");","module.exports = require(\"@toruslabs/openlogin-jrpc\");","module.exports = require(\"@toruslabs/openlogin-utils\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * from \"./constants\";\nexport * from \"./interfaces\";\nexport * from \"./IStore\";\nexport { default as loglevel } from \"./loglevel\";\nexport { default } from \"./OpenLogin\";\nexport * from \"./OpenLogin\";\nexport { default as OpenLoginStore } from \"./OpenLoginStore\";\nexport { default as Provider } from \"./Provider\";\nexport * from \"./utils\";\n"],"names":["PostMessageStream","setupMultiplex","modalDOMElementID","log","documentReady","htmlToElement","handleStream","handle","eventName","handler","handlerWrapper","chunk","removeListener","on","Modal","modalUrl","initIFrame","setupStream","iframeElem","Error","mux","name","target","targetWindow","contentWindow","targetOrigin","URL","origin","verifierStream","createStream","src","documentIFrameElem","document","getElementById","remove","info","modalZIndex","toString","_hideModal","body","appendChild","Promise","resolve","onload","initialized","style","display","position","width","height","top","right","left","bottom","border","setAttribute","Object","entries","map","k","v","join","clientId","whiteLabel","loginConfig","cb","_showModal","modalHandler","write","decrypt","encrypt","getPublic","sign","get","getRpcPromiseCallback","base64url","jsonToBase64","keccak","randomId","merge","ALLOWED_INTERACTIONS","OPENLOGIN_METHOD","OPENLOGIN_NETWORK","UX_MODE","OpenLoginStore","Provider","awaitReq","constructURL","getHashQueryParams","getPopupFeatures","preloadIframe","OpenLogin","options","provider","Proxy","deleteProperty","_iframeUrl","network","MAINNET","CYAN","TESTNET","SK_TESTNET","CELESTE","AQUA","DEVELOPMENT","modal","initState","no3PC","_startUrl","_popupUrl","redirectUrl","window","location","protocol","host","pathname","uxMode","REDIRECT","replaceUrlOnRedirect","originData","_storageServerUrl","storageKey","_sessionNamespace","webauthnTransports","state","privKey","padStart","coreKitKey","store","getInstance","iframeUrl","startUrl","popupUrl","support3PC","storageServerUrl","sessionNamespace","console","SESSIONLESS_REDIRECT","updateOriginData","all","init","params","sessionId","set","_syncState","_getData","_check3PCSupport","res","filteredOriginData","JSON","parse","stringify","keys","forEach","key","getWhitelist","getWhiteLabel","whitelist","url","searchParams","append","href","signed_urls","loginProvider","_selectedLogin","_modal","defaultParams","loginParams","request","method","LOGIN","allowedInteractions","POPUP","logoutParams","_clientId","undefined","JRPC","LOGOUT","walletKey","oAuthPrivateKey","tKey","profileImage","dappShare","idToken","oAuthIdToken","oAuthAccessToken","appState","args","pid","session","length","userData","timestamp","Date","now","Buffer","from","update","digest","sig","_user","_userSig","encode","_userData","_originData","_whiteLabelData","_loginConfig","_sessionId","_webauthnTransports","includes","_jrpcRequest","_origin","_setPIDData","setTimeout","baseURL","hash","b64Params","_pid","_method","u","windowRef","open","Array","isArray","push","reject","_rpcRequest","CHECK_3PC_SUPPORT","data","SET_PID_DATA","GET_DATA","newState","_prompt","cancel","selectedLoginResponse","cleanup","message","privateKey","exec","ciphertext","storeData","getStore","userInfo","email","aggregateVerifier","verifier","verifierId","typeOfLogin","dataObject","hashParams","MemoryStore","value","storeKey","localStorageAvailable","sessionStorageAvailable","storage","_storeKey","getItem","resetStore","error","currStore","setItem","storeNamespace","instance","localStorage","sessionStorage","finalStoreKey","createIdRemapMiddleware","createStreamMiddleware","JRPCEngine","SafeEventEmitter","pump","rpcStream","JRPCConnection","stream","rpcEngine","middleware","payload","callback","jsonrpc","id","SUPPORTED_KEY_CURVES","SECP256K1","ED25519","LOGIN_PROVIDER","GOOGLE","FACEBOOK","REDDIT","DISCORD","TWITCH","APPLE","LINE","GITHUB","KAKAO","LINKEDIN","TWITTER","WEIBO","WECHAT","EMAIL_PASSWORDLESS","SMS_PASSWORDLESS","WEBAUTHN","JWT","MFA_LEVELS","DEFAULT","OPTIONAL","MANDATORY","NONE","loglevel","setLevel","getLogger","safeatob","readyState","addEventListener","html","template","createElement","trimmedHtml","trim","innerHTML","content","firstChild","whitelistUrl","appKey","appKeyBuf","replaceUrl","result","queryResult","queryParams","substring","hashUrl","hashResult","cleanUrl","history","replaceState","closedByHandler","closedMonitor","setInterval","closed","clearInterval","ev","removeEventListener","close","query","h","storageAvailable","type","storageExists","storageLength","x","removeItem","code","openloginIframeHtml","crossOrigin","rel","relList","supports","head","dualScreenLeft","screenLeft","screenX","dualScreenTop","screenTop","screenY","w","innerWidth","documentElement","clientWidth","screen","innerHeight","clientHeight","systemZoom","Math","abs","features","default"],"sourceRoot":""}