/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	// The require scope
/******/ 	var __webpack_require__ = {};
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "BaseProvider": () => (/* reexport */ BaseProvider),
  "CommonPrivateKeyProvider": () => (/* reexport */ CommonPrivateKeyProvider),
  "createRandomId": () => (/* reexport */ createRandomId)
});

;// CONCATENATED MODULE: external "@babel/runtime/helpers/classCallCheck"
const classCallCheck_namespaceObject = require("@babel/runtime/helpers/classCallCheck");
var classCallCheck_default = /*#__PURE__*/__webpack_require__.n(classCallCheck_namespaceObject);
;// CONCATENATED MODULE: external "@babel/runtime/helpers/createClass"
const createClass_namespaceObject = require("@babel/runtime/helpers/createClass");
var createClass_default = /*#__PURE__*/__webpack_require__.n(createClass_namespaceObject);
;// CONCATENATED MODULE: external "@babel/runtime/helpers/assertThisInitialized"
const assertThisInitialized_namespaceObject = require("@babel/runtime/helpers/assertThisInitialized");
var assertThisInitialized_default = /*#__PURE__*/__webpack_require__.n(assertThisInitialized_namespaceObject);
;// CONCATENATED MODULE: external "@babel/runtime/helpers/inherits"
const inherits_namespaceObject = require("@babel/runtime/helpers/inherits");
var inherits_default = /*#__PURE__*/__webpack_require__.n(inherits_namespaceObject);
;// CONCATENATED MODULE: external "@babel/runtime/helpers/possibleConstructorReturn"
const possibleConstructorReturn_namespaceObject = require("@babel/runtime/helpers/possibleConstructorReturn");
var possibleConstructorReturn_default = /*#__PURE__*/__webpack_require__.n(possibleConstructorReturn_namespaceObject);
;// CONCATENATED MODULE: external "@babel/runtime/helpers/get"
const get_namespaceObject = require("@babel/runtime/helpers/get");
var get_default = /*#__PURE__*/__webpack_require__.n(get_namespaceObject);
;// CONCATENATED MODULE: external "@babel/runtime/helpers/getPrototypeOf"
const getPrototypeOf_namespaceObject = require("@babel/runtime/helpers/getPrototypeOf");
var getPrototypeOf_default = /*#__PURE__*/__webpack_require__.n(getPrototypeOf_namespaceObject);
;// CONCATENATED MODULE: external "@babel/runtime/helpers/defineProperty"
const defineProperty_namespaceObject = require("@babel/runtime/helpers/defineProperty");
var defineProperty_default = /*#__PURE__*/__webpack_require__.n(defineProperty_namespaceObject);
;// CONCATENATED MODULE: external "@toruslabs/base-controllers"
const base_controllers_namespaceObject = require("@toruslabs/base-controllers");
;// CONCATENATED MODULE: external "@web3auth/base"
const base_namespaceObject = require("@web3auth/base");
;// CONCATENATED MODULE: external "eth-rpc-errors"
const external_eth_rpc_errors_namespaceObject = require("eth-rpc-errors");
;// CONCATENATED MODULE: ./src/baseProvider.ts








function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var BaseProvider = /*#__PURE__*/function (_ref) {
  inherits_default()(BaseProvider, _ref);
  var _super = _createSuper(BaseProvider);
  // should be Assigned in setupProvider

  function BaseProvider(_ref2) {
    var _thisSuper, _this;
    var config = _ref2.config,
      state = _ref2.state;
    classCallCheck_default()(this, BaseProvider);
    _this = _super.call(this, {
      config: config,
      state: state
    });
    defineProperty_default()(assertThisInitialized_default()(_this), "_providerEngineProxy", null);
    if (!config.chainConfig) throw base_namespaceObject.WalletInitializationError.invalidProviderConfigError("Please provide chainConfig");
    if (!config.chainConfig.chainId) throw base_namespaceObject.WalletInitializationError.invalidProviderConfigError("Please provide chainId inside chainConfig");
    if (!config.chainConfig.rpcTarget) throw base_namespaceObject.WalletInitializationError.invalidProviderConfigError("Please provide rpcTarget inside chainConfig");
    _this.defaultState = {
      chainId: "loading"
    };
    _this.defaultConfig = {
      chainConfig: config.chainConfig,
      networks: defineProperty_default()({}, config.chainConfig.chainId, config.chainConfig)
    };
    get_default()((_thisSuper = assertThisInitialized_default()(_this), getPrototypeOf_default()(BaseProvider.prototype)), "initialize", _thisSuper).call(_thisSuper);
    return _this;
  }
  createClass_default()(BaseProvider, [{
    key: "provider",
    get: function get() {
      return this._providerEngineProxy;
    },
    set: function set(_) {
      throw new Error("Method not implemented.");
    }
  }, {
    key: "addChain",
    value: function addChain(chainConfig) {
      if (!chainConfig.chainId) throw external_eth_rpc_errors_namespaceObject.ethErrors.rpc.invalidParams("chainId is required");
      if (!chainConfig.rpcTarget) throw external_eth_rpc_errors_namespaceObject.ethErrors.rpc.invalidParams("chainId is required");
      this.configure({
        networks: _objectSpread(_objectSpread({}, this.config.networks), {}, defineProperty_default()({}, chainConfig.chainId, chainConfig))
      });
    }
  }, {
    key: "getChainConfig",
    value: function getChainConfig(chainId) {
      var _this$config$networks;
      var chainConfig = (_this$config$networks = this.config.networks) === null || _this$config$networks === void 0 ? void 0 : _this$config$networks[chainId];
      if (!chainConfig) throw external_eth_rpc_errors_namespaceObject.ethErrors.rpc.invalidRequest("Chain ".concat(chainId, " is not supported, please add chainConfig for it"));
      return chainConfig;
    }
  }, {
    key: "getProviderEngineProxy",
    value: function getProviderEngineProxy() {
      return this._providerEngineProxy;
    }
  }, {
    key: "updateProviderEngineProxy",
    value: function updateProviderEngineProxy(providerEngineProxy) {
      if (this._providerEngineProxy) {
        this._providerEngineProxy.setTarget(providerEngineProxy);
      } else {
        this._providerEngineProxy = (0,base_controllers_namespaceObject.createEventEmitterProxy)(providerEngineProxy);
      }
    }
  }]);
  return BaseProvider;
}(base_controllers_namespaceObject.BaseController);
;// CONCATENATED MODULE: external "@babel/runtime/helpers/asyncToGenerator"
const asyncToGenerator_namespaceObject = require("@babel/runtime/helpers/asyncToGenerator");
var asyncToGenerator_default = /*#__PURE__*/__webpack_require__.n(asyncToGenerator_namespaceObject);
;// CONCATENATED MODULE: external "@babel/runtime/regenerator"
const regenerator_namespaceObject = require("@babel/runtime/regenerator");
var regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator_namespaceObject);
;// CONCATENATED MODULE: external "@toruslabs/openlogin-jrpc"
const openlogin_jrpc_namespaceObject = require("@toruslabs/openlogin-jrpc");
;// CONCATENATED MODULE: ./src/commonPrivateKeyProvider.ts







var CommonPrivateKeyProvider = /*#__PURE__*/function () {
  function CommonPrivateKeyProvider() {
    classCallCheck_default()(this, CommonPrivateKeyProvider);
    defineProperty_default()(this, "_providerEngineProxy", null);
  }
  createClass_default()(CommonPrivateKeyProvider, [{
    key: "provider",
    get: function get() {
      return this._providerEngineProxy;
    },
    set: function set(_) {
      throw new Error("Method not implemented.");
    }
  }, {
    key: "addChain",
    value: function addChain(_) {
      throw new Error("Method not implemented.");
    }
  }, {
    key: "setupProvider",
    value: function () {
      var _setupProvider = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee(privKey) {
        var privKeyMiddleware, engine, provider;
        return regenerator_default().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                privKeyMiddleware = this.getPrivKeyMiddleware(privKey);
                engine = new openlogin_jrpc_namespaceObject.JRPCEngine();
                engine.push(privKeyMiddleware);
                provider = (0,base_controllers_namespaceObject.providerFromEngine)(engine);
                this.updateProviderEngineProxy(provider);
              case 5:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));
      function setupProvider(_x) {
        return _setupProvider.apply(this, arguments);
      }
      return setupProvider;
    }()
  }, {
    key: "switchChain",
    value: function () {
      var _switchChain = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee2(_) {
        return regenerator_default().wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                return _context2.abrupt("return", Promise.resolve());
              case 1:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2);
      }));
      function switchChain(_x2) {
        return _switchChain.apply(this, arguments);
      }
      return switchChain;
    }()
  }, {
    key: "getProviderEngineProxy",
    value: function getProviderEngineProxy() {
      return this._providerEngineProxy;
    }
  }, {
    key: "updateProviderEngineProxy",
    value: function updateProviderEngineProxy(providerEngineProxy) {
      if (this._providerEngineProxy) {
        this._providerEngineProxy.setTarget(providerEngineProxy);
      } else {
        this._providerEngineProxy = (0,base_controllers_namespaceObject.createEventEmitterProxy)(providerEngineProxy);
      }
    }
  }, {
    key: "getPrivKeyMiddleware",
    value: function getPrivKeyMiddleware(privKey) {
      var middleware = {
        getPrivatekey: function () {
          var _getPrivatekey = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee3() {
            return regenerator_default().wrap(function _callee3$(_context3) {
              while (1) {
                switch (_context3.prev = _context3.next) {
                  case 0:
                    return _context3.abrupt("return", privKey);
                  case 1:
                  case "end":
                    return _context3.stop();
                }
              }
            }, _callee3);
          }));
          function getPrivatekey() {
            return _getPrivatekey.apply(this, arguments);
          }
          return getPrivatekey;
        }()
      };
      return this.createPrivKeyMiddleware(middleware);
    }
  }, {
    key: "createPrivKeyMiddleware",
    value: function createPrivKeyMiddleware(_ref) {
      var getPrivatekey = _ref.getPrivatekey;
      function getPrivatekeyHandler(_x3, _x4) {
        return _getPrivatekeyHandler.apply(this, arguments);
      }
      function _getPrivatekeyHandler() {
        _getPrivatekeyHandler = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee4(_, res) {
          return regenerator_default().wrap(function _callee4$(_context4) {
            while (1) {
              switch (_context4.prev = _context4.next) {
                case 0:
                  _context4.next = 2;
                  return getPrivatekey();
                case 2:
                  res.result = _context4.sent;
                case 3:
                case "end":
                  return _context4.stop();
              }
            }
          }, _callee4);
        }));
        return _getPrivatekeyHandler.apply(this, arguments);
      }
      return (0,openlogin_jrpc_namespaceObject.createScaffoldMiddleware)({
        private_key: (0,openlogin_jrpc_namespaceObject.createAsyncMiddleware)(getPrivatekeyHandler)
      });
    }
  }]);
  return CommonPrivateKeyProvider;
}();
defineProperty_default()(CommonPrivateKeyProvider, "getProviderInstance", /*#__PURE__*/function () {
  var _ref2 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee5(params) {
    var providerFactory;
    return regenerator_default().wrap(function _callee5$(_context5) {
      while (1) {
        switch (_context5.prev = _context5.next) {
          case 0:
            providerFactory = new CommonPrivateKeyProvider();
            _context5.next = 3;
            return providerFactory.setupProvider(params.privKey);
          case 3:
            return _context5.abrupt("return", providerFactory);
          case 4:
          case "end":
            return _context5.stop();
        }
      }
    }, _callee5);
  }));
  return function (_x5) {
    return _ref2.apply(this, arguments);
  };
}());
;// CONCATENATED MODULE: external "json-rpc-random-id"
const external_json_rpc_random_id_namespaceObject = require("json-rpc-random-id");
var external_json_rpc_random_id_default = /*#__PURE__*/__webpack_require__.n(external_json_rpc_random_id_namespaceObject);
;// CONCATENATED MODULE: ./src/utils.ts

var createRandomId = external_json_rpc_random_id_default()();
;// CONCATENATED MODULE: ./src/index.ts




module.exports = __webpack_exports__;
/******/ })()
;
//# sourceMappingURL=baseProvider.cjs.js.map