{"version":3,"file":"core.cjs.js","mappings":"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","sources":["webpack://@web3auth/core/webpack/bootstrap","webpack://@web3auth/core/webpack/runtime/compat get default export","webpack://@web3auth/core/webpack/runtime/define property getters","webpack://@web3auth/core/webpack/runtime/hasOwnProperty shorthand","webpack://@web3auth/core/webpack/runtime/make namespace object","webpack://@web3auth/core/external commonjs2 \"@babel/runtime/helpers/asyncToGenerator\"","webpack://@web3auth/core/external commonjs2 \"@babel/runtime/helpers/classCallCheck\"","webpack://@web3auth/core/external commonjs2 \"@babel/runtime/helpers/createClass\"","webpack://@web3auth/core/external commonjs2 \"@babel/runtime/helpers/assertThisInitialized\"","webpack://@web3auth/core/external commonjs2 \"@babel/runtime/helpers/inherits\"","webpack://@web3auth/core/external commonjs2 \"@babel/runtime/helpers/possibleConstructorReturn\"","webpack://@web3auth/core/external commonjs2 \"@babel/runtime/helpers/getPrototypeOf\"","webpack://@web3auth/core/external commonjs2 \"@babel/runtime/helpers/defineProperty\"","webpack://@web3auth/core/external commonjs2 \"@babel/runtime/regenerator\"","webpack://@web3auth/core/external commonjs2 \"@toruslabs/openlogin-jrpc\"","webpack://@web3auth/core/external commonjs2 \"@web3auth/base\"","webpack://@web3auth/core/external commonjs2 \"@web3auth/base-plugin\"","webpack://@web3auth/core/./src/core.ts","webpack://@web3auth/core/./src/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/asyncToGenerator\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/classCallCheck\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/createClass\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/assertThisInitialized\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/inherits\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/possibleConstructorReturn\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/getPrototypeOf\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/defineProperty\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/regenerator\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@toruslabs/openlogin-jrpc\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@web3auth/base\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@web3auth/base-plugin\");","import { SafeEventEmitter } from \"@toruslabs/openlogin-jrpc\";\nimport {\n  ADAPTER_EVENTS,\n  ADAPTER_NAMESPACES,\n  ADAPTER_STATUS,\n  ADAPTER_STATUS_TYPE,\n  CHAIN_NAMESPACES,\n  CONNECTED_EVENT_DATA,\n  CustomChainConfig,\n  getChainConfig,\n  IAdapter,\n  IWeb3Auth,\n  log,\n  SafeEventEmitterProvider,\n  storageAvailable,\n  UserAuthInfo,\n  UserInfo,\n  WALLET_ADAPTER_TYPE,\n  WalletInitializationError,\n  WalletLoginError,\n  Web3AuthError,\n} from \"@web3auth/base\";\nimport { IPlugin, PLUGIN_NAMESPACES } from \"@web3auth/base-plugin\";\n\nexport interface Web3AuthCoreOptions {\n  /**\n   * Client id for web3auth.\n   * You can obtain your client id from the web3auth developer dashboard.\n   * You can set any random string for this on localhost.\n   */\n  clientId: string;\n  /**\n   * custom chain configuration for chainNamespace\n   *\n   * @defaultValue mainnet config of provided chainNamespace\n   */\n  chainConfig: Partial<CustomChainConfig> & Pick<CustomChainConfig, \"chainNamespace\">;\n\n  /**\n   * setting to true will enable logs\n   *\n   * @defaultValue false\n   */\n  enableLogging?: boolean;\n  /**\n   * setting to \"local\" will persist social login session accross browser tabs.\n   *\n   * @defaultValue \"local\"\n   */\n  storageKey?: \"session\" | \"local\";\n\n  /**\n   * sessionTime (in seconds) for idToken issued by Web3Auth for server side verification.\n   * @defaultValue 86400\n   *\n   * Note: max value can be 7 days (86400 * 7) and min can be  1 day (86400)\n   */\n  sessionTime?: number;\n}\n\nconst ADAPTER_CACHE_KEY = \"Web3Auth-cachedAdapter\";\nexport class Web3AuthCore extends SafeEventEmitter implements IWeb3Auth {\n  readonly coreOptions: Web3AuthCoreOptions;\n\n  public connectedAdapterName: string | null = null;\n\n  public status: ADAPTER_STATUS_TYPE = ADAPTER_STATUS.NOT_READY;\n\n  public cachedAdapter: string | null = null;\n\n  protected walletAdapters: Record<string, IAdapter<unknown>> = {};\n\n  private plugins: Record<string, IPlugin> = {};\n\n  private storage: \"sessionStorage\" | \"localStorage\" = \"localStorage\";\n\n  constructor(options: Web3AuthCoreOptions) {\n    super();\n    if (!options.clientId) throw WalletInitializationError.invalidParams(\"Please provide a valid clientId in constructor\");\n    if (options.enableLogging) log.enableAll();\n    else log.disableAll();\n    if (!options.chainConfig?.chainNamespace || !Object.values(CHAIN_NAMESPACES).includes(options.chainConfig?.chainNamespace))\n      throw WalletInitializationError.invalidParams(\"Please provide a valid chainNamespace in chainConfig\");\n    if (options.storageKey === \"session\") this.storage = \"sessionStorage\";\n    this.cachedAdapter = storageAvailable(this.storage) ? window[this.storage].getItem(ADAPTER_CACHE_KEY) : null;\n\n    this.coreOptions = {\n      ...options,\n      chainConfig: {\n        ...(getChainConfig(options.chainConfig?.chainNamespace, options.chainConfig?.chainId) || {}),\n        ...options.chainConfig,\n      },\n    };\n    this.subscribeToAdapterEvents = this.subscribeToAdapterEvents.bind(this);\n  }\n\n  get provider(): SafeEventEmitterProvider | null {\n    if (this.status === ADAPTER_STATUS.CONNECTED && this.connectedAdapterName) {\n      const adapter = this.walletAdapters[this.connectedAdapterName];\n      return adapter.provider;\n    }\n    return null;\n  }\n\n  set provider(_: SafeEventEmitterProvider | null) {\n    throw new Error(\"Not implemented\");\n  }\n\n  public async init(): Promise<void> {\n    const initPromises = Object.keys(this.walletAdapters).map((adapterName) => {\n      this.subscribeToAdapterEvents(this.walletAdapters[adapterName]);\n      // if adapter doesn't have any chain config yet thn set it based on provided namespace and chainId.\n      // if no chainNamespace or chainId is being provided, it will connect with mainnet.\n      if (!this.walletAdapters[adapterName].chainConfigProxy) {\n        const providedChainConfig = this.coreOptions.chainConfig;\n        if (!providedChainConfig.chainNamespace) throw WalletInitializationError.invalidParams(\"Please provide chainNamespace in chainConfig\");\n        const chainConfig = {\n          ...getChainConfig(providedChainConfig.chainNamespace, providedChainConfig.chainId),\n          ...providedChainConfig,\n        } as CustomChainConfig;\n        this.walletAdapters[adapterName].setChainConfig(chainConfig);\n      }\n      this.walletAdapters[adapterName].setAdapterSettings({ sessionTime: this.coreOptions.sessionTime, clientId: this.coreOptions.clientId });\n\n      return this.walletAdapters[adapterName].init({ autoConnect: this.cachedAdapter === adapterName }).catch((e) => log.error(e));\n    });\n    this.status = ADAPTER_STATUS.READY;\n    await Promise.all(initPromises);\n  }\n\n  public configureAdapter(adapter: IAdapter<unknown>): Web3AuthCore {\n    this.checkInitRequirements();\n    const providedChainConfig = this.coreOptions.chainConfig;\n\n    if (!providedChainConfig.chainNamespace) throw WalletInitializationError.invalidParams(\"Please provide chainNamespace in chainConfig\");\n\n    const adapterAlreadyExists = this.walletAdapters[adapter.name];\n    if (adapterAlreadyExists) throw WalletInitializationError.duplicateAdapterError(`Wallet adapter for ${adapter.name} already exists`);\n    if (adapter.adapterNamespace !== ADAPTER_NAMESPACES.MULTICHAIN && adapter.adapterNamespace !== providedChainConfig.chainNamespace)\n      throw WalletInitializationError.incompatibleChainNameSpace(\n        `This wallet adapter belongs to ${adapter.adapterNamespace} which is incompatible with currently used namespace: ${providedChainConfig.chainNamespace}`\n      );\n\n    if (\n      adapter.adapterNamespace === ADAPTER_NAMESPACES.MULTICHAIN &&\n      adapter.currentChainNamespace &&\n      providedChainConfig.chainNamespace !== adapter.currentChainNamespace\n    ) {\n      // chainConfig checks are already validated in constructor so using typecast is safe here.\n      adapter.setChainConfig(providedChainConfig as CustomChainConfig);\n    }\n\n    this.walletAdapters[adapter.name] = adapter;\n    return this;\n  }\n\n  public clearCache() {\n    if (!storageAvailable(this.storage)) return;\n    window[this.storage].removeItem(ADAPTER_CACHE_KEY);\n    this.cachedAdapter = null;\n  }\n\n  /**\n   * Connect to a specific wallet adapter\n   * @param walletName - Key of the walletAdapter to use.\n   */\n  async connectTo<T>(walletName: WALLET_ADAPTER_TYPE, loginParams?: T): Promise<SafeEventEmitterProvider | null> {\n    if (!this.walletAdapters[walletName])\n      throw WalletInitializationError.notFound(`Please add wallet adapter for ${walletName} wallet, before connecting`);\n    const provider = await this.walletAdapters[walletName].connect(loginParams);\n    return provider;\n  }\n\n  async logout(options: { cleanup: boolean } = { cleanup: false }): Promise<void> {\n    if (this.status !== ADAPTER_STATUS.CONNECTED || !this.connectedAdapterName) throw WalletLoginError.notConnectedError(`No wallet is connected`);\n    await this.walletAdapters[this.connectedAdapterName].disconnect(options);\n  }\n\n  async getUserInfo(): Promise<Partial<UserInfo>> {\n    log.debug(\"Getting user info\", this.status, this.connectedAdapterName);\n    if (this.status !== ADAPTER_STATUS.CONNECTED || !this.connectedAdapterName) throw WalletLoginError.notConnectedError(`No wallet is connected`);\n    return this.walletAdapters[this.connectedAdapterName].getUserInfo();\n  }\n\n  async authenticateUser(): Promise<UserAuthInfo> {\n    if (this.status !== ADAPTER_STATUS.CONNECTED || !this.connectedAdapterName) throw WalletLoginError.notConnectedError(`No wallet is connected`);\n    return this.walletAdapters[this.connectedAdapterName].authenticateUser();\n  }\n\n  public async addPlugin(plugin: IPlugin): Promise<IWeb3Auth> {\n    if (this.plugins[plugin.name]) throw new Error(`Plugin ${plugin.name} already exist`);\n    if (plugin.pluginNamespace !== PLUGIN_NAMESPACES.MULTICHAIN && plugin.pluginNamespace !== this.coreOptions.chainConfig.chainNamespace)\n      throw new Error(\n        `This plugin belongs to ${plugin.pluginNamespace} namespace which is incompatible with currently used namespace: ${this.coreOptions.chainConfig.chainNamespace}`\n      );\n\n    this.plugins[plugin.name] = plugin;\n    await plugin.initWithWeb3Auth(this);\n    return this;\n  }\n\n  protected subscribeToAdapterEvents(walletAdapter: IAdapter<unknown>): void {\n    walletAdapter.on(ADAPTER_EVENTS.CONNECTED, async (data: CONNECTED_EVENT_DATA) => {\n      this.status = ADAPTER_STATUS.CONNECTED;\n      this.connectedAdapterName = data.adapter;\n      this.cacheWallet(data.adapter);\n      log.debug(\"connected\", this.status, this.connectedAdapterName);\n      await Promise.all(\n        Object.values(this.plugins).map((plugin) => {\n          return plugin.connect().catch((error: Web3AuthError) => {\n            // swallow error if connector adapter doesn't supports this plugin.\n            if (error.code === 5211) {\n              return;\n            }\n            // throw error;\n            log.error(error);\n          });\n        })\n      );\n      this.emit(ADAPTER_EVENTS.CONNECTED, { ...data } as CONNECTED_EVENT_DATA);\n    });\n\n    walletAdapter.on(ADAPTER_EVENTS.DISCONNECTED, async (data) => {\n      // get back to ready state for rehydrating.\n      this.status = ADAPTER_STATUS.READY;\n      if (storageAvailable(this.storage)) {\n        const cachedAdapter = window[this.storage].getItem(ADAPTER_CACHE_KEY);\n        if (this.connectedAdapterName === cachedAdapter) {\n          this.clearCache();\n        }\n      }\n\n      log.debug(\"disconnected\", this.status, this.connectedAdapterName);\n      await Promise.all(\n        Object.values(this.plugins).map((plugin) => {\n          return plugin.disconnect().catch((error: Web3AuthError) => {\n            // swallow error if adapter doesn't supports this plugin.\n            if (error.code === 5211) {\n              return;\n            }\n            // throw error;\n            log.error(error);\n          });\n        })\n      );\n      this.connectedAdapterName = null;\n      this.emit(ADAPTER_EVENTS.DISCONNECTED, data);\n    });\n    walletAdapter.on(ADAPTER_EVENTS.CONNECTING, (data) => {\n      this.status = ADAPTER_STATUS.CONNECTING;\n      this.emit(ADAPTER_EVENTS.CONNECTING, data);\n      log.debug(\"connecting\", this.status, this.connectedAdapterName);\n    });\n    walletAdapter.on(ADAPTER_EVENTS.ERRORED, (data) => {\n      this.status = ADAPTER_STATUS.ERRORED;\n      this.clearCache();\n      this.emit(ADAPTER_EVENTS.ERRORED, data);\n      log.debug(\"errored\", this.status, this.connectedAdapterName);\n    });\n\n    walletAdapter.on(ADAPTER_EVENTS.ADAPTER_DATA_UPDATED, (data) => {\n      log.debug(\"adapter data updated\", data);\n      this.emit(ADAPTER_EVENTS.ADAPTER_DATA_UPDATED, data);\n    });\n  }\n\n  protected checkInitRequirements(): void {\n    if (this.status === ADAPTER_STATUS.CONNECTING) throw WalletInitializationError.notReady(\"Already pending connection\");\n    if (this.status === ADAPTER_STATUS.CONNECTED) throw WalletInitializationError.notReady(\"Already connected\");\n    if (this.status === ADAPTER_STATUS.READY) throw WalletInitializationError.notReady(\"Adapter is already initialized\");\n  }\n\n  private cacheWallet(walletName: string) {\n    if (!storageAvailable(this.storage)) return;\n    window[this.storage].setItem(ADAPTER_CACHE_KEY, walletName);\n    this.cachedAdapter = walletName;\n  }\n}\n","export * from \"./core\";\n"],"names":["SafeEventEmitter","ADAPTER_EVENTS","ADAPTER_NAMESPACES","ADAPTER_STATUS","CHAIN_NAMESPACES","getChainConfig","log","storageAvailable","WalletInitializationError","WalletLoginError","PLUGIN_NAMESPACES","ADAPTER_CACHE_KEY","Web3AuthCore","options","NOT_READY","clientId","invalidParams","enableLogging","enableAll","disableAll","chainConfig","chainNamespace","Object","values","includes","storageKey","storage","cachedAdapter","window","getItem","coreOptions","chainId","subscribeToAdapterEvents","bind","status","CONNECTED","connectedAdapterName","adapter","walletAdapters","provider","_","Error","initPromises","keys","map","adapterName","chainConfigProxy","providedChainConfig","setChainConfig","setAdapterSettings","sessionTime","init","autoConnect","catch","e","error","READY","Promise","all","checkInitRequirements","adapterAlreadyExists","name","duplicateAdapterError","adapterNamespace","MULTICHAIN","incompatibleChainNameSpace","currentChainNamespace","removeItem","walletName","loginParams","notFound","connect","cleanup","notConnectedError","disconnect","debug","getUserInfo","authenticateUser","plugin","plugins","pluginNamespace","initWithWeb3Auth","walletAdapter","on","data","cacheWallet","code","emit","DISCONNECTED","clearCache","CONNECTING","ERRORED","ADAPTER_DATA_UPDATED","notReady","setItem"],"sourceRoot":""}